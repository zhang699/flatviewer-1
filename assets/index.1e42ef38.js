var e=Object.prototype.hasOwnProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,n=Object.assign,l=(n,l)=>{var r={};for(var s in n)e.call(n,s)&&l.indexOf(s)<0&&(r[s]=n[s]);if(null!=n&&t)for(var s of t(n))l.indexOf(s)<0&&a.call(n,s)&&(r[s]=n[s]);return r};import{C as r,s,f as o,c,t as i,a as m,n as u,u as d,b as f,T as p,d as g,G as x,e as E,S as h,g as v,h as y,i as b,F as w,j as N,k as j,R as k,L as $,l as S,m as O,B as C,o as I,D as R,p as F,q as B,r as P,v as z,w as L,x as A,y as H,z as _,A as M,E as V,H as D,I as U,J as W,K as J,M as q,N as G,O as T,Q as K,P as Q,U as X,V as Y,W as Z,X as ee}from"./vendor.b3b0bd65.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,r)=>{const s=new URL(e,n);if(self[t].moduleMap[s])return a(self[t].moduleMap[s]);const o=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){r(new Error(`Failed to import: ${e}`)),l(c)},onload(){a(self[t].moduleMap[s]),l(c)}});document.head.appendChild(c)})),self[t].moduleMap={}}}("/assets/");function te(e){return r.createElement("div",{className:"flex flex-1 flex-col items-center justify-center h-full py-6 overflow-y-auto"},r.createElement("div",{className:"max-w-prose w-full text-center space-y-4 px-4 py-6 lg:px-0 max-h-full"},r.createElement("img",{className:"grayscale w-24 mx-auto",src:e.img,alt:e.alt}),r.createElement("div",{className:"leading-relaxed text-gray-600 font-mono"},e.children)))}var ae="/assets/bug.9f9ea123.svg";const ne=s.get("flat-viewer-pat");let le=ne?o("https://api.github.com").auth(`token ${ne}`):o("https://api.github.com");const re=["package.json","tsconfig.json"],se=[".vscode",".github"];function oe(e,t,a){return le.url(`/repos/${e}/${t}/git/trees/${a}?recursive=1`).get().notFound((e=>{throw new Error("File not found")})).error(401,(()=>{s.remove("flat-viewer-pat"),console.log("PAT expired"),le=o("https://api.github.com")})).error(403,(e=>{if(JSON.parse(e.message).message.includes("API rate limit exceeded"))throw new Error("Rate limit exceeded");throw new Error(e)})).json((e=>(e=>e.tree.map((e=>e.path)).filter((e=>{const t=e.split(".").pop()||"";return["csv","tsv","json","geojson","topojson","yml","yaml"].includes(t)&&!re.includes(e.split("/").slice(-1)[0])&&!se.includes(e.split("/")[0])})))(e)))}const ce=e=>"object"==typeof e?JSON.stringify(e,void 0,2):e.toString();function ie(e,t){return d(["commits",e],(()=>function(e){const{name:t,owner:a,filename:n}=e;return le.url(`/repos/${a}/${t}/commits`).query({path:n}).get().json((e=>{if(0===e.length)throw new Error("No commits...");return e}))}(e)),n({retry:!1,refetchOnWindowFocus:!1},t))}function me(e,t){return d(["data",e],(async()=>await async function(e){const{filename:t,name:a,owner:r,sha:s}=e;if(!t)return[];const u=t.split(".").pop()||"";if(!["csv","tsv","json","geojson","topojson","yml","yaml"].includes(u))return[];const d=await o(`https://raw.githubusercontent.com/${r}/${a}/${s}/${t}`).get().notFound((async()=>{if(ne){const e=await le.url(`/repos/${r}/${a}/contents/${t}`).get().json();return atob(e.content)}throw new Error("Data file not found")})).text();let f;try{if("csv"===u)f=c(d);else if(["geojson","topojson"].includes(u)||t.endsWith(".geo.json")){if(f=JSON.parse(d),f.features){const e=f.features.map((e=>{let t={};Object.keys(null==e?void 0:e.geometry).forEach((a=>{t[`geometry.${a}`]=e.geometry[a]}));let a={};Object.keys(null==e?void 0:e.properties).forEach((t=>{a[`properties.${t}`]=e.properties[t]}));const{geometry:r,properties:s}=e,o=l(e,["geometry","properties"]);return n(n(n({},o),t),a)})),{features:t}=f,a=l(f,["features"]);f=n({features:e},a)}}else if("json"===u)f=JSON.parse(d);else if("tsv"===u)f=i(d);else{if("yml"!==u&&"yaml"!==u)return[{invalidValue:ce(d)}];f=m.parse(d)}}catch(x){return console.log(x),[{invalidValue:ce(d)}]}if("object"!=typeof f)return[{invalidValue:ce(f)}];if(Array.isArray(f))return[{value:f}];const p=Object.keys(f);if(!p.length||Object.values(f).find((e=>"object"!=typeof e||Array.isArray(e))))return p.map((e=>{const t=f[e];return Array.isArray(t)?"string"==typeof t[0]?{key:e,value:t.map((e=>({value:e})))}:{key:e,value:t}:{key:e,invalidValue:ce(t)}}));let g=[];return p.forEach((e=>{g=[...g,n(n({},f[e]),{id:e})]})),[{value:g}]}(e)),n({retry:!1,refetchOnWindowFocus:!1},t))}function ue({owner:e,name:t},a){return d(["files",e,t],(()=>async function({owner:e,name:t}){try{const a=await oe(e,t,"main");if("string"!=typeof a)return a}catch(a){try{const a=await oe(e,t,"master");if("string"!=typeof a)return a}catch(n){if("Rate limit exceeded"==n.message)throw new Error("Rate limit exceeded");throw new Error(n)}}}({owner:e,name:t})),n({retry:!1,refetchOnWindowFocus:!1},a))}function de(e,t){return d(["org",e],(()=>async function(e){return(await le.url("/search/repositories").query({q:`topic:flat-data org:${e}`,per_page:100}).get().json()).items}(e)),n({retry:!1,refetchOnWindowFocus:!1},t))}u.configure({showSpinner:!1});const fe=/\n(.*)/s,pe=/^[^\(]+/;function ge(e,t){if(!e)return;const a=e.match(pe),n=e.match(fe);if(!a)return;const l=a[0].trim();if(n)try{const e=JSON.parse(n[0]),a=e.files.findIndex((e=>e.name===t));return{message:l,file:e.files[a]}}catch(r){return{}}}function xe(){return r.createElement("svg",{className:"animate-spin h-5 w-5 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},r.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))}function Ee(e){const{text:t="Loading..."}=e;return r.createElement("div",{className:"flex flex-1 flex-col items-center justify-center h-full"},r.createElement("div",{className:"flex items-center space-x-2"},r.createElement(xe,null),r.createElement("span",{className:"font-mono text-sm"},t)))}function he(e){return r.createElement("div",{className:"flex flex-1 flex-col items-center justify-center h-full"},r.createElement("div",{className:"max-w-4xl w-full text-center space-y-4 px-4 lg:px-0"},r.createElement("img",{className:"grayscale w-24 mx-auto",src:"/assets/code.5d377dc4.svg",alt:e.alt}),r.createElement("div",{className:"leading-relaxed text-gray-600 font-mono text-lg"},e.children)))}function ve(e){const[t,a]=f({tab:h,stickyColumnName:h,sort:h,filters:h}),{sha:n,previousSha:l,filename:s,owner:o,name:c}=e,i=me({sha:n,filename:s,owner:o,name:c},{onSuccess:e=>{const n=t.tab&&e.find((e=>e.key===t.tab))?t.tab:(e.find((e=>e.key))||{}).key;a({tab:n},"replaceIn")}}),m=me({sha:l,filename:s,owner:o,name:c},{enabled:Boolean(l)}),{data:u=[],isError:d}=i,{data:v=[]}=m,y=u.length>1,b=u.findIndex((e=>(null==e?void 0:e.key)===t.tab))||0,w=u[b]||{},N=v[b]||{},j=function(e){if(!e)return;const t=decodeURI(e).split("&")||[];let a={};return t.forEach((e=>{const[t,n]=e.split("=");if(!t||!n)return;const l=2===(null==n?void 0:n.split(",").length);a[t]=l?n.split(",").map((e=>+e)):n})),a}(t.filters),[k,$]=r.useState(!1);r.useEffect((()=>{k&&($(!1),a({sort:void 0,stickyColumnName:void 0,filters:void 0},"replaceIn"))}),[s]);const S=`${o}_${c}__${s}__${(new Date).toLocaleDateString()}`.replace(/\./g,"-");return"loading"===i.status?r.createElement(Ee,{text:"Loading data..."}):"error"===i.status?r.createElement(te,{img:ae,alt:"Error icon"},"Oh no, we couldn't load"," ",r.createElement("em",{className:"text-underline font-normal"},s)," for some reason."):r.createElement(r.Fragment,null,r.createElement(p,{position:"bottom-left"}),r.createElement("div",{className:"flex-1 overflow-auto flex flex-col text-xs relative"},y&&r.createElement("div",{className:"w-full px-4 bg-indigo-600 "},r.createElement("div",{className:"flex space-x-2 overflow-x-auto"},u.map((({key:e,value:n})=>{const l=g(["h-8 px-3 flex-shrink-0 appearance-none focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-indigo-600 border-b relative rounded-tl rounded-tr",{"text-indigo-600 font-medium bg-white":e===t.tab,"bg-transparent border-transparent hover:bg-indigo-700 hover:border-indigo-200 focus:bg-indigo-700 focus:border-indigo-200 text-white":e!==t.tab}]);return r.createElement("button",{onClick:()=>e&&a({tab:e,sort:void 0,stickyColumnName:void 0,filters:void 0},"replaceIn"),className:l,key:e,style:{top:1}},e," ",(null==n?void 0:n.length)&&r.createElement("span",{className:"opacity-75"},"(",null==n?void 0:n.length," rows)"))})))),y&&!t.tab&&r.createElement(he,{alt:"Empty state icon"},r.createElement("div",{className:"space-y-4"},r.createElement("div",null,"Hmm, it looks like your data file has multiple keys with array data.",r.createElement("br",null),"Select the tab of the key you'd like to visualize."))),!!w.value&&r.createElement("div",{className:"relative h-full"},r.createElement(x,{data:w.value,diffData:N.value,defaultSort:t.sort?t.sort.split(","):void 0,defaultStickyColumnName:t.stickyColumnName?t.stickyColumnName:void 0,defaultFilters:j||{},downloadFilename:S,onChange:e=>{var t;k?a({sort:e.sort.join(","),stickyColumnName:e.stickyColumnName,filters:(t=e.filters,encodeURI(Object.keys(t).map((e=>{const a=t[e];return[e,"string"==typeof a?a:Array.isArray(a)?a.join(","):""].join("=")})).join("&")))},"replaceIn"):$(!0)}})),d&&r.createElement(te,{img:ae,alt:"Error icon"},"Oh no, we couldn't load"," ",r.createElement("em",{className:"text-underline font-normal"},s)," for some reason."),!w.value&&"success"===i.status&&r.createElement(te,{img:ae,alt:"Error icon"},"Oh no, we can't load that type of data from"," ",r.createElement("em",{className:"text-underline font-normal"},s),".",r.createElement("br",null),r.createElement("pre",{className:"text-sm text-gray-600 p-3 bg-white m-6 font-mono rounded-md max-w-3xl overflow-x-auto text-left mb-12 block whitespace-pre-wrap"},E(w.invalidValue,{length:3e3})))))}function ye(e){const{items:t,value:a,onChange:l,itemRenderer:s,selectedItemRenderer:o,placeholder:c,label:i,disclosureClass:m}=e,{isOpen:u,getToggleButtonProps:d,getLabelProps:f,getMenuProps:p,highlightedIndex:x,getItemProps:E}=v({items:t,selectedItem:a,onSelectedItemChange:e=>{e.selectedItem&&l(e.selectedItem)}}),[h,b]=r.useState(null),[w,N]=r.useState(null),{styles:j,attributes:k,forceUpdate:$}=y(h,w,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]});return r.useEffect((()=>{u&&$&&$()}),[u,$]),r.createElement("div",{className:"w-full"},i&&r.createElement("label",n({className:"text-xs text-gray-500 font-medium sr-only"},f()),i),r.createElement("div",{className:"relative",ref:b},r.createElement("button",n(n({type:"button"},d()),{className:m}),a?o(a):r.createElement("span",{className:"text-gray-600"},c)),r.createElement("div",n({className:g(["min-w-full bg-white z-10 m-0 w-72",{"sr-only":!u}]),style:j.popper,ref:N},k.popper),r.createElement("div",{className:"rounded-md bg-white shadow-lg max-h-48"},r.createElement("ul",n({className:"rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm max-h-48 overflow-auto"},p()),t.map(((e,t)=>{const a=x===t;return r.createElement("li",n({className:g(["cursor-default select-none relative py-2 pl-3 pr-4 text-sm",{"bg-gray-100":a}]),key:`${e}${t}`},E({item:e,index:t})),r.createElement("div",{className:g(["block truncate text-xs text-left"])},s(e)))})))))))}function be(e){const{items:t,value:a,onChange:l,itemRenderer:s,placeholder:o,label:c,disclosureClass:i,isClearable:m=!1}=e,[u,d]=r.useState(""),f=r.useRef(null),p=(t||[]).filter((e=>a===u||e.includes(u))),{isOpen:x,getToggleButtonProps:E,getLabelProps:h,getMenuProps:v,getInputProps:y,getComboboxProps:N,highlightedIndex:j,getItemProps:k,openMenu:$,closeMenu:S}=b({selectedItem:a||"",items:p,onInputValueChange:({inputValue:e})=>{d(e||""),p.includes(e||"")&&l(e||""),!e&&m&&l("")},onSelectedItemChange:({selectedItem:e})=>{e&&(l(e),f.current&&f.current.blur())}});return r.createElement("div",{className:"w-full"},c&&r.createElement("label",n({className:"text-xs text-gray-500 font-medium sr-only"},h()),c),r.createElement("div",{className:"relative"},r.createElement("label",n({},h()),c),r.createElement("div",n({className:"flex items-center mt-2 appearance-none bg-indigo-700 hover:bg-indigo-800 h-9 px-2 rounded text-white w-full lg:max-w-md font-mono"},N()),r.createElement(w,{size:16}),r.createElement("input",n({type:"text",className:"p-2 flex-1 bg-transparent border-none text-xs overflow-ellipsis",style:{boxShadow:"none"}},y({onFocus:e=>{x||($(),e.target.select())},ref:f}))),r.createElement("button",n(n({type:"button"},E()),{"aria-label":"toggle menu",style:{height:"2.3em"}}),"↓"),m&&!!a&&r.createElement("button",{className:"absolute right-10 bg-transparent",onClick:()=>{d(""),l("")}},r.createElement("div",{className:"codicon codicon-x pr-1 text-sm pt-px"}))),r.createElement("ul",n({className:g(["absolute left-0 bg-white shadow-md text-gray-800 z-10 overflow-auto",{"sr-only":!x}]),style:{top:"100%",maxWidth:"calc(100vw - 2em)",minWidth:"100%",maxHeight:"20em"}},v()),x&&r.createElement(r.Fragment,null,p.map(((e,t)=>r.createElement("li",n({className:g(["p-2",{"bg-indigo-100":j===t}]),key:`${e}${t}`},k({item:e,index:t})),s(e)))),!t&&r.createElement("div",{className:"p-2 font-mono text-xs text-gray-500"},"Loading..."),!p.length&&r.createElement("div",{className:"p-2 font-mono text-xs text-gray-500"},"No files found",u&&` that include "${u}"`)))))}function we(e){var t,a;const{author:n,message:l,filename:s}=e;if(!l)return null;if(!("flat-data@users.noreply.github.com"===n))return r.createElement("div",{className:"flex items-center justify-between"},r.createElement("div",{className:"truncate"},r.createElement("span",{className:"font-mono"},l)));const o=ge(l,s||"");if(!o)return r.createElement("div",{className:"flex items-center justify-between truncate"},r.createElement("span",{className:"font-mono"},l));const c=(null==(t=o.file)?void 0:t.deltaBytes)<0,i=g(["text-xs font-mono",{"text-red-700 bg-red-50 p-1 rounded":c,"text-green-700 bg-green-100 p-1 rounded":!c}]);return r.createElement("div",{className:"flex items-center justify-between"},r.createElement("div",{className:"truncate"},r.createElement("span",{className:"font-mono"},o.message)),r.createElement("div",{className:"pl-4 flex-shrink-0"},r.createElement("span",{className:i},r.createElement("span",null,c?"-":"+"),Math.abs(null==(a=o.file)?void 0:a.deltaBytes),"b")))}function Ne(e){var t,a;const{match:l}=e,{owner:s,name:o}=l.params,[c,i]=N("filename",h),[m,u]=N("sha",h),d=j(),{data:f,status:g,error:x}=ue({owner:s,name:o},{onSuccess:e=>{e.length&&i(c||e[0],"replaceIn")}}),{data:E=[]}=ie({owner:s,name:o,filename:c},{enabled:Boolean(c),onSuccess:e=>{const t=e[0].sha;e.length>0&&(m?e.some((e=>e.sha===m))||(A.error("Hmm, we couldn't find a commit by that SHA. Reverting to the most recent commit.",{duration:4e3}),u(t,"replaceIn")):u(t,"replaceIn"))}}),v=`https://github.com/${s}/${o}`,y=m?ge((null==(t=null==E?void 0:E.find((e=>e.sha===m)))?void 0:t.commit.message)||"",c||""):null,b=null==(a=null==y?void 0:y.file)?void 0:a.source,w=E.findIndex((e=>e.sha===m)),H=-1!==w?(E[w+1]||{}).sha:void 0,_=r.createElement("div",{className:"lg:flex space-y-4 lg:space-y-0 lg:space-x-4"},r.createElement("div",{className:"space-y-2"},r.createElement("p",{className:"text-xs font-medium text-indigo-200"},"Repository"),r.createElement("div",{className:"font-mono text-sm text-white"},r.createElement("a",{className:"hover:underline focus:underline bg-indigo-700 hover:bg-indigo-800 focus:bg-indigo-800 h-9 rounded text-white inline-flex items-center px-2 focus:outline-none focus:ring-2 focus:ring-indigo-400",target:"_blank",rel:"noopener noreferrer",href:v},r.createElement("div",{className:"flex items-center space-x-2"},r.createElement(k,null),r.createElement("div",{className:"overflow-ellipsis whitespace-nowrap overflow-hidden text-xs",style:{maxWidth:"min(30em, 100% - 1em)"}},s,"/",o),r.createElement("div",{className:"opacity-50"},r.createElement($,null)))))),!!(f||[]).length&&r.createElement("div",{className:"space-y-2"},r.createElement("p",{className:"text-xs font-medium text-indigo-200"},"Data File"),r.createElement(be,{value:c||"",placeholder:"Select a file",onChange:e=>{i(e)},items:f||[],itemRenderer:e=>r.createElement("span",{className:"font-mono text-xs"},e)})),Boolean(c)&&r.createElement("div",{className:"space-y-2"},r.createElement("p",{className:"text-xs font-medium text-indigo-200"},"Commit"),E&&r.createElement(ye,{label:"Choose a commit",placeholder:"Select a SHA",onChange:u,value:m||"",items:E.map((e=>e.sha)),disclosureClass:"appearance-none bg-indigo-700 hover:bg-indigo-800 focus:bg-indigo-800 h-9 px-2 rounded text-white text-xs focus:outline-none focus:ring-2 focus:ring-indigo-400 w-full lg:max-w-md",itemRenderer:e=>{var t,a;const n=E.find((t=>t.sha===e));return r.createElement("div",{className:"flex flex-col space-y-1 text-xs"},r.createElement(we,{message:null==n?void 0:n.commit.message,author:null==(t=null==n?void 0:n.commit.author)?void 0:t.email,filename:c}),r.createElement("div",{className:"flex items-center space-x-2"},r.createElement("div",{className:"flex items-center space-x-2"},r.createElement("p",{className:"text-gray-600"},S(new Date((null==(a=null==n?void 0:n.commit.author)?void 0:a.date)||""),new Date,{addSuffix:!0})))))},selectedItemRenderer:e=>{var t,a,n;return r.createElement("div",{className:"flex items-center space-x-2"},r.createElement(O,{size:16}),r.createElement("div",{className:"flex-1 truncate"},r.createElement(we,{message:null==(t=E.find((t=>t.sha===e)))?void 0:t.commit.message,author:null==(n=null==(a=E.find((t=>t.sha===e)))?void 0:a.commit.author)?void 0:n.email,filename:c})))}})),!!b&&r.createElement("div",{className:"space-y-2 min-w-0"},r.createElement("p",{className:"text-xs font-medium text-indigo-200"},"Data source"),r.createElement("a",{className:"font-mono hover:underline focus:underline bg-indigo-700 hover:bg-indigo-800 focus:bg-indigo-800 h-9 rounded text-white flex items-center px-2 focus:outline-none focus:ring-2 focus:ring-indigo-400",href:b,target:"_blank",rel:"noopener noreferrer"},r.createElement("div",{className:"flex items-center space-x-2 min-w-0"},r.createElement("div",{className:"flex-none"},r.createElement(C,null)),r.createElement("div",{className:"overflow-ellipsis whitespace-nowrap overflow-hidden text-xs"},b),r.createElement("div",{className:"opacity-50"},r.createElement($,null))))));return r.createElement(r.Fragment,null,r.createElement(I,null,s,"/",o," – Flat"),r.createElement(p,{position:"bottom-left"}),r.createElement("div",{className:"p-4 bg-indigo-600"},r.createElement("header",{className:"flex justify-between items-center"},r.createElement("div",{className:"text-indigo-100 font-light text-sm"},r.createElement("strong",{className:"font-bold"},"Flat Viewer")," a simple tool for exploring flat data files in GitHub repositories."),r.createElement(R,n(n({},d),{className:"rounded-none focus:outline-none focus:ring lg:hidden text-white text-xl"}),d.visible?r.createElement(F,null):r.createElement(B,null))),r.createElement(P,n({className:"lg:hidden overflow-visible mt-4"},d),_),r.createElement(R,n(n({},d),{className:"rounded-none focus:outline-none focus:ring lg:hidden text-white text-xl"}),!d.visible&&r.createElement("div",{className:"flex items-center lg:hidden mt-4 text-white text-xs"},r.createElement("span",{className:""},z(`${s}/${o}`)),Boolean(c)&&r.createElement(r.Fragment,null,r.createElement("span",{className:"mx-1"},r.createElement(L,null))," ",z(c||"")))),r.createElement("div",{className:"controls mt-4"},_)),r.createElement(r.Fragment,null,m&&Boolean(c)&&"error"!==g&&r.createElement(ve,{key:m,filename:c||"",owner:s,name:o,previousSha:H,sha:m})),l&&!(f||[]).length&&"loading"!==g&&!m&&r.createElement(te,{img:ae,alt:"Error icon"},f?"Hmm, we couldn't find any files in that repo":x&&"Error: Rate limit exceeded"===(null==x?void 0:x.message)?null==x?void 0:x.message:"Hmm, are you sure that's a public GitHub repo?"))}function je(e){return r.createElement("ul",{className:"divide-y rounded-xl overflow-hidden"},e.repos.map((t=>{const a=S(Date.parse(t.updated_at),new Date,{addSuffix:!0});return r.createElement("li",{className:"bg-white hover:bg-opacity-70",key:t.name},r.createElement(H,{className:"p-4 block",to:`/${e.org}/${t.name}`},r.createElement("span",{className:"text-indigo-600 font-medium"},e.org,"/",t.name),r.createElement("div",{className:"mt-1 mb-2 text-lg"},r.createElement("p",null,t.description)),r.createElement("ul",{className:"flex items-center space-x-3 text-sm text-gray-600"},r.createElement("li",{className:"flex space-x-1 items-center"},r.createElement(_,{className:"text-gray-400"}),r.createElement("span",null,t.stargazers_count)),r.createElement("li",null,t.language),Boolean(t.license)&&r.createElement("li",null,t.license.name),r.createElement("li",null,"Updated ",a))))})))}function ke(e){const{match:t}=e,{org:a}=t.params,{data:n=[],status:l}=de(a);return r.createElement("div",{className:"flex flex-col h-full"},r.createElement("div",{className:"p-4 bg-indigo-600 flex-shrink-0"},r.createElement("header",{className:"flex justify-between items-center"},r.createElement("div",{className:"text-indigo-100 font-light text-sm"},r.createElement("strong",{className:"font-bold"},"Flat Viewer")," a simple tool for exploring flat data files in GitHub repositories."))),"loading"===l&&r.createElement("div",{className:"flex items-center justify-center h-full"},r.createElement("div",{className:"max-w-sm flex items-center justify-center space-x-4"},r.createElement(xe,null),r.createElement("p",null,"Loading organization..."))),"success"===l&&(n.length>0?r.createElement("div",{className:"p-4 overflow-scroll"},r.createElement("div",{className:"mb-4"},"Repositories tagged"," ",r.createElement("span",{className:"bg-indigo-600 text-white text-xs p-1 rounded"},"flat-data")," ","in the ",r.createElement("span",{className:"font-medium"},a)," organization."),r.createElement(je,{repos:n,org:a})):r.createElement(te,{img:ae,alt:"Bug icon"},r.createElement("div",{className:"max-w-sm mx-auto"},"Hmm, we couldn't find any repos with the topic"," ",r.createElement("span",{className:"bg-indigo-600 text-white text-xs p-1 rounded"},"flat-data")," ","in this organization"))),"error"===l&&r.createElement("div",{className:"flex items-center justify-center h-full"},r.createElement(te,{img:ae,alt:"Bug icon"},"Hmm, we could not load the organization.")))}const $e={owner:"",name:""},Se=M().shape({owner:V().required("Please enter a repository owner"),name:V().optional()});function Oe(e){const t=(t,a)=>g(["appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:z-10 text-sm",{"border-red-200 bg-red-50 focus:ring-red-500 focus:border-red-500":Boolean(e.errors[t]),"focus:ring-gray-500 focus:border-gray-500":!Boolean(e.errors[t]),"rounded-t-md":0===a,"rounded-b-md":1===a}]);return r.createElement("div",null,r.createElement(W,{className:"mt-8 space-y-4"},r.createElement("div",{className:"rounded-md shadow-sm -space-y-px"},r.createElement("div",null,r.createElement("label",{htmlFor:"owner",className:"sr-only"},"Repository owner"),r.createElement(J,{id:"owner",name:"owner",type:"text",className:t("owner",0),placeholder:"Repository owner or organization"})),r.createElement("div",null,r.createElement("label",{htmlFor:"name",className:"sr-only"},"Password"),r.createElement(J,{id:"name",name:"name",type:"text",className:t("name",1),placeholder:"Repository name"}))),r.createElement("div",null,r.createElement("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-gray-900 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},"View Flat Data"))),r.createElement("div",{className:"relative my-4"},r.createElement("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true"},r.createElement("div",{className:"w-full border-t border-gray-300"})),r.createElement("div",{className:"relative flex justify-center"},r.createElement("span",{className:"px-2 bg-gray-50 text-sm text-gray-500"},"or, alternatively"))),r.createElement("div",null,r.createElement("div",{className:"text-left flex items-center space-x-2"},r.createElement("p",{className:"text-gray-500 text-sm"},"Start with an example:"),r.createElement("div",{className:"flex items-center space-x-2"},r.createElement(H,{to:"/githubocto/flat-demo-bitcoin-price",className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-900 hover:bg-gray-700 text-white font-mono focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},"githubocto/flat-demo-bitcoin-price")))),r.createElement("div",{className:"mt-3 text-center text-gray-500 text-sm"},"or read ",r.createElement("a",{href:"https://next.github.com/projects/flat-data",className:"underline"},"the writeup")))}function Ce(){const e=D();return r.createElement(U,{component:Oe,initialValues:$e,validationSchema:Se,validateOnBlur:!1,validateOnChange:!1,onSubmit:t=>{e.push(`/${t.owner}/`+(t.name||""))}})}function Ie(){return r.createElement("div",{className:"flex flex-1 items-center justify-center bg-gray-50"},r.createElement("div",{className:"max-w-md w-full text-center space-y-8 px-4"},r.createElement("img",{className:"opacity-20 w-24 mx-auto",src:"/assets/flat.8324641b.svg",alt:"Flat Logo"}),r.createElement(Ce,null)))}function Re(){const e=q();var t;return t=e,r.useEffect((()=>{t>0?u.start():u.done()}),[t]),r.createElement(G,null,r.createElement(I,null,"Flat"),r.createElement(T,null,r.createElement(K,{ReactRouterRoute:Q},r.createElement(X,null,r.createElement(Q,{exact:!0,path:"/",component:Ie}),r.createElement(Q,{exact:!0,path:"/:org/",component:ke}),r.createElement(Q,{path:"/:owner/:name",component:Ne})))))}const Fe=new Y;Z.render(r.createElement(r.StrictMode,null,r.createElement(ee,{client:Fe},r.createElement(Re,null))),document.getElementById("root"));
